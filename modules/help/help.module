<?php
// $Id: help.module,v 1.19 2003/09/19 07:41:54 dries Exp $

function help_system($field){
  $system["description"] = t("Manages displaying online help.");
  return $system[$field];
}

function help_link($type) {
  if ($type == "admin") {
    menu("admin/help/glossary", "glossary", "help_glossary", NULL, 8);
    menu("admin/help", "help", "help_admin", NULL, 9);
  }
}

function help_glossary() {

  $output .= "<h3>Glossary</h3><dl>";
  $output .= "<dt>Block</dt><dd>A small box containing information or content placed in the left-hand or right-hand sidebar of a web page.</dd>";
  $output .= "<dt>Comment</dt><dd>A note attached to a node. Usually intended to clarify, explain, criticize, or express an opinion on the original material.</dd>";
  $output .= "<dt>Moderation</dt><dd>The activity of making sure a post to a Drupal site fits in with what is expected for that Drupal site.<dl>";
  $output .= "<dt>Approved</dt><dd>A moderated post which has been accepted by the moderators for publication. (See published).</dd>";
  $output .= "<dt>Waiting</dt><dd>A moderated post which is still being voted on to be accepted for publication. (See published.)</dd>";
  $output .= "<dt>Moderators</dt><dd>The group of Drupal users that reviews posts before they are published. These users have the \"access submission queue\" permission. (See Published).</dd></dl></dd>";
  $output .= "<dt>Node</dt><dd>The basic data unit in Drupal. Everything is a node or an extention of a node.</dd>";
  $output .= "<dt>Public</dt><dd>See published.</dd>";
  $output .= "<dt>Published</dt><dd>A node that is viewable by everyone. (See unpublished.)</dd>";
  $output .= "<dt>Role</dt><dd>A classification users are placed into for the purpose of setting users' permissions.</dd>";
  $output .= strtr("<dt>Taxonomy</dt><dd>A division of a collection of things into ordered, classified groups. (See %taxonomy.)</dd>", array("%taxonomy" => l(t("taxonomy help"), "admin/taxonomy/help")));
  $output .= "<dt>Unpublished</dt><dd>A node that is only viewable by administrators and moderators.</dd>";
  $output .= "<dt>User</dt><dd>A person who has an account at your Drupal site, and is logged in with that account.</dd>";
  $output .= "<dt>Visitor</dt><dd>A person who does not have an account at your Drupal site or a person who has an account at your Drupal site but is <u>not</u> logged in with that account. Also termed \"anonymous user\".</dd>";
  $output .= "</dl>";

  return t($output);
}

function help_admin() {
  $output = "";

  foreach (module_list() as $name) {
    if (module_hook($name, "help")) {
      $temp = module_invoke($name, "help", "admin/".$name."/help");
      if (!empty($temp)) {
        $links[] = l($name, "admin/help#$name");
        $output .= "<h2><a id=\"$name\">". ucfirst($name) ." module</a></h2>";
        $output .= $temp;
      }
    }
  }

  $output = "<small>". implode(" &middot; ", $links) ."</small><hr />". $output;
  return $output;
}

?>

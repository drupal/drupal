#
# Apache VirtualHost configuration used by Travis CI.
#
# This configuration file will be placed into the default Apache configuration
# on test machines, making it so that the localhost URL will be able to serve
# pages generated by PHP-FPM.
#
<VirtualHost *:80>
  ServerAdmin webmaster@localhost

  DocumentRoot %BUILD_DIR%

  # This directory will be replaced with the appropriate web root by the
  # .travis.yml configuration.
  <Directory "%BUILD_DIR%">
    Options FollowSymLinks MultiViews ExecCGI
    AllowOverride All
    Order allow,deny
    Allow from all
  </Directory>

  # Wire up Apache to use Travis CI's php-fpm.
  <IfModule mod_fastcgi.c>
    AddHandler php5-fcgi .php
    Action php5-fcgi /php5-fcgi
    Alias /php5-fcgi /usr/lib/cgi-bin/php5-fcgi
    FastCgiExternalServer /usr/lib/cgi-bin/php5-fcgi -idle-timeout 600 -host 127.0.0.1:9000 -pass-header Authorization
  </IfModule>

  # Possible values include: debug, info, notice, warn, error, crit,
  # alert, emerg.
  LogLevel debug

  ErrorLog ${APACHE_LOG_DIR}/error.log
  CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>

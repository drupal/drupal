/**
 * tua-body-scroll-lock v1.6.1
 * (c) 2025 Evinma, BuptStEve
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).bodyScrollLock={})}(this,(function(e){"use strict";var t=function(){return"undefined"==typeof window},n=function(e){e=e||navigator.userAgent;var t=/(iPad).*OS\s([\d_]+)/.test(e);return{ios:!t&&/(iPhone\sOS)\s([\d_]+)/.test(e)||t,android:/(Android);?[\s/]+([\d.]+)?/.test(e)}};function o(e){if(t())return!1;if(!e)throw new Error("options must be provided");var n=!1,o={get passive(){n=!0}},i=function(){},l="__TUA_BSL_TEST_PASSIVE__";window.addEventListener(l,i,o),window.removeEventListener(l,i,o);var c=e.capture;return n?e:void 0!==c&&c}function i(){return"__BSL_PREVENT_DEFAULT__"in window||(window.__BSL_PREVENT_DEFAULT__=function(e){e.cancelable&&e.preventDefault()}),window.__BSL_PREVENT_DEFAULT__}function l(e){return e?Array.isArray(e)?e:[e]:[]}function c(e,t,n){var o,i,l,c,r=e.scrollTop,s=e.scrollLeft,d=e.scrollWidth,u=e.scrollHeight,a=e.clientWidth,f=e.clientHeight,v=function(e){var t=window.getComputedStyle(e).flexDirection;return{column:"column-reverse"===t,row:"row-reverse"===t}}(e);return v.column?(o=n>0&&Math.abs(r)+f+1>=u,i=n<0&&Math.abs(r)<=1):(o=n>0&&0===r,i=n<0&&r+f+1>=u),v.row?(l=t>0&&Math.abs(s)+a+1>=d,c=t<0&&Math.abs(s)<=1):(l=t>0&&0===s,c=t<0&&s+a+1>=d),{isOnTop:o,isOnBottom:i,isOnLeft:l,isOnRight:c}}var r={lockedNum:0,lockedElements:[],unLockCallback:null,documentListenerAdded:!1,initialClientPos:{clientX:0,clientY:0}};function s(e){if(t())return r;if(!(null==e?void 0:e.useGlobalLockState))return s.lockState;var n="__BSL_LOCK_STATE__"in window?Object.assign(Object.assign({},r),window.__BSL_LOCK_STATE__):r;return window.__BSL_LOCK_STATE__=n,n}function d(e){var t=document.documentElement,n=Object.assign({},t.style),o=(void 0,!0);if(t.style.overflow="hidden",t.style.boxSizing="border-box",o){var i=window.innerWidth-t.clientWidth,l=parseInt(window.getComputedStyle(t).paddingRight,10);t.style.paddingRight="".concat(i+l,"px")}return function(){["overflow","boxSizing","paddingRight"].forEach((function(e){t.style[e]=n[e]||""}))}}function u(e){e.documentListenerAdded&&(document.removeEventListener("touchmove",i(),o({passive:!1})),e.documentListenerAdded=!1)}s.lockState=r,e.clearBodyLocks=function(e){var o;if(!t()){var i=s(e);if(i.lockedNum=0,null===(o=i.unLockCallback)||void 0===o||o.call(i),n().ios){if(i.lockedElements.length)for(var l=i.lockedElements.pop();l;)l.ontouchmove=null,l.ontouchstart=null,l=i.lockedElements.pop();u(i)}}},e.getLockState=s,e.lock=function(e,r){if(!t()){var u=n(),a=s(r);u.ios?(l(e).filter((function(e){return e&&-1===a.lockedElements.indexOf(e)})).forEach((function(e){e.ontouchstart=function(e){var t=e.targetTouches[0],n=t.clientX,o=t.clientY;a.initialClientPos={clientX:n,clientY:o}},e.ontouchmove=function(t){!function(e,t,n){if(t){var o=e.targetTouches[0].clientX-n.clientX,l=e.targetTouches[0].clientY-n.clientY,r=Math.abs(l)>Math.abs(o),s=c(t,o,l),d=s.isOnTop,u=s.isOnBottom,a=s.isOnLeft,f=s.isOnRight;if(r&&(d||u)||!r&&(a||f))return i()(e)}e.stopPropagation()}(t,e,a.initialClientPos)},a.lockedElements.push(e)})),function(e){if(!n().ios)return;if(e.documentListenerAdded)return;document.addEventListener("touchmove",i(),o({passive:!1})),e.documentListenerAdded=!0}(a),(null==r?void 0:r.setOverflowForIOS)&&(a.unLockCallback=d())):a.lockedNum<=0&&(a.unLockCallback=u.android?function(e){var t=document.documentElement,n=document.body,o=t.scrollTop||n.scrollTop,i=Object.assign({},t.style),l=Object.assign({},n.style);return t.style.height="100%",t.style.overflow="hidden",n.style.top="-".concat(o,"px"),n.style.width="100%",n.style.height="auto",n.style.position="fixed",n.style.overflow=(null==e?void 0:e.overflowType)||"hidden",function(){t.style.height=i.height||"",t.style.overflow=i.overflow||"",["top","width","height","overflow","position"].forEach((function(e){n.style[e]=l[e]||""})),"scrollBehavior"in document.documentElement.style?window.scrollTo({top:o,behavior:"instant"}):window.scrollTo(0,o)}}(r):d()),a.lockedNum+=1}},e.unlock=function(e,o){var i;if(!t()){var c=s(o);c.lockedNum-=1,c.lockedNum>0||(null===(i=c.unLockCallback)||void 0===i||i.call(c),n().ios&&(l(e).forEach((function(e){var t=c.lockedElements.indexOf(e);e&&-1!==t&&(e.ontouchmove=null,e.ontouchstart=null,c.lockedElements.splice(t,1))})),u(c)))}}}));
